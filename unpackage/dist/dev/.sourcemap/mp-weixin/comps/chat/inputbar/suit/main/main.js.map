{"version":3,"sources":["webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?6727","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?b067","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?65ce","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?96ff","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?374b","webpack:////Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue?8788"],"names":["WebIM","require","msgType","disp","msgStorage","data","inputMessage","userMessage","changeValue","components","props","username","type","Object","default","chatType","String","SINGLE_CHAT","created","beforeMount","moved","destroyed","mounted","methods","focus","$emit","bubbles","blur","isGroupChat","CHAT_ROOM","getSendToParam","groupId","your","bindMessage","e","setData","detail","value","emojiAction","emoji","str","msglen","length","start","lastIndexOf","end","len","slice","sendMessage","me","prototype","trim","replace","id","conn","getUniqueId","msg","message","TEXT","set","from","myName","to","roomType","success","serverMsgId","console","log","fire","fail","setGroup","send","body","obj","saveSendMsg","evt","saveMsg"],"mappings":"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","file":"comps/chat/inputbar/suit/main/main.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=261930a8&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/lr/Documents/work/easemob-uniapp/webim-uniapp-demo/comps/chat/inputbar/suit/main/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=261930a8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet WebIM = require(\"../../../../../utils/WebIM\")[\"default\"];\nlet msgType = require(\"../../../msgtype\");\nlet disp = require(\"../../../../../utils/broadcast\");\nlet msgStorage = require(\"../../../msgstorage\");\n\nexport default {\n  data() {\n    return {\n      inputMessage: \"\",\n      // render input 的值\n      userMessage: \"\", // input 的实时值\n      changeValue: \"\"\n    };\n  },\n\n  components: {},\n  props: {\n    username: {\n      type: Object,\n      default: () => ({})\n    },\n    chatType: {\n      type: String,\n      default: msgType.chatType.SINGLE_CHAT\n    }\n  },\n\n  // lifetimes\n  created() {},\n\n  beforeMount() {},\n\n  moved() {},\n\n  destroyed() {},\n\n  mounted() {},\n\n  methods: {\n    focus() {\n      this.$emit(\"inputFocused\", null, {\n        bubbles: true\n      });\n    },\n    blur() {\n      this.$emit(\"inputBlured\", null, {\n        bubbles: true\n      });\n    },\n\n    isGroupChat() {\n      return this.chatType == msgType.chatType.CHAT_ROOM;\n    },\n\n    getSendToParam() {\n      return this.isGroupChat() ? this.username.groupId : this.username.your;\n    },\n\n    // bindinput 不能打冒号！\n    bindMessage(e) {\n      this.setData({\n        userMessage: e.detail.value\n      });\n    },\n\n    emojiAction(emoji) {\n      var str;\n      var msglen = this.userMessage.length - 1;\n\n      if (emoji && emoji != \"[del]\") {\n        str = this.userMessage + emoji;\n      } else if (emoji == \"[del]\") {\n        let start = this.userMessage.lastIndexOf(\"[\");\n        let end = this.userMessage.lastIndexOf(\"]\");\n        let len = end - start;\n\n        if (end != -1 && end == msglen && len >= 3 && len <= 4) {\n          str = this.userMessage.slice(0, start);\n        } else {\n          str = this.userMessage.slice(0, msglen);\n        }\n      }\n\n      this.setData({\n        userMessage: str,\n        inputMessage: str\n      });\n    },\n\n    sendMessage() {\n      let me = this;\n      String.prototype.trim = function() {\n        return this.replace(/(^\\s*)|(\\s*$)/g, \"\");\n      };\n      if (!this.userMessage.trim()) {\n        return;\n      }\n      let id = WebIM.conn.getUniqueId();\n      let msg = new WebIM.message(msgType.TEXT, id);\n      msg.set({\n        msg: this.userMessage,\n        from: this.username.myName,\n        to: this.getSendToParam(),\n        roomType: false,\n        chatType: this.chatType,\n        success(id, serverMsgId) {\n          console.log(\"成功了\");\n          me.changeValue=\"\"\n          me.userMessage=\"\"\n          disp.fire(\"em.chat.sendSuccess\", id, me.userMessage);\n        },\n        fail(id, serverMsgId) {\n          console.log(\"失败了\");\n        }\n      });\n      if (this.chatType == msgType.chatType.CHAT_ROOM) {\n        msg.setGroup(\"groupchat\");\n      }\n      WebIM.conn.send(msg.body);\n      let obj = {\n        msg: msg,\n        type: msgType.TEXT\n      };\n      this.saveSendMsg(obj);\n    },\n    saveSendMsg(evt) {\n      msgStorage.saveMsg(evt.msg, evt.type);\n    }\n  }\n};\n","import mod from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1590550017108\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}